# URL Shortener

[English version](README.md)

Сервис для сокращения длинных URL-адресов.

## Требования
### Функциональные требования
- Пользователи могут создавать короткие URL-адреса из длинных URL-адресов.
	- Короткие URL-адреса должны быть уникальными.
	- Короткие URL-адреса должны быть короткими (максимальная длина 11 символов).
- Пользователи могут перенаправляться по коротким URL-адресам на соответствующие длинные URL-адреса.
### Нефункциональные требования
- 200 миллионов новых URL в месяц, соотношение чтения/записи 100:1.
	- Write QPS: ~76
	- Read QPS: ~7600
- хранить ссылки в течение 5 лет, одна ссылка занимает в среднем 500 байт.
	- Хранение: ~6 ТБ

## Решение
- Для URL генерируем уникальный код
	- Сперва генерируем уникальный 64-битный числовой идентификатор с помощью алгоритма Snowflake ID.
		- 41 бита для временной метки (в миллисекундах) с пользовательским эпохальным временем.
		- 10 бит для идентификатора узла (до 1024 узлов).
		- 12 бит для последовательного номера (до 4096 ID на узел в миллисекунду).
	- Затем кодируем идентификатор в Base62 для получения короткой строки.
		- В результате получается строка длиной до 11 символов, состоящая из цифр (0-9), строчных (a-z) и заглавных букв (A-Z).
- Сохраняем соответствие между уникальным кодом и длинным URL в базе данных.

### Архитектура
- Добавляем Load Balancer (Nginx) перед сервисом для распределения нагрузки.
- Хранение ссылок осуществляется в базе данных noSQL (Cassandra), что обеспечивает масштабируемость и высокую доступность.
